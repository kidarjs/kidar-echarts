var Ht=Object.defineProperty,Vt=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable;var Z=(u,s,l)=>s in u?Ht(u,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[s]=l,tt=(u,s)=>{for(var l in s||(s={}))$t.call(s,l)&&Z(u,l,s[l]);if(Y)for(var l of Y(s))Jt.call(s,l)&&Z(u,l,s[l]);return u},et=(u,s)=>Vt(u,Ut(s));(function(u,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("vue-demi"),require("echarts")):typeof define=="function"&&define.amd?define(["exports","vue-demi","echarts"],s):(u=typeof globalThis!="undefined"?globalThis:u||self,s(u.KIDAR_ECHARTS={},u.VueDemi,u.echarts))})(this,function(u,s,l){"use strict";var q=function(){if(typeof Map!="undefined")return Map;function t(e,n){var r=-1;return e.some(function(i,a){return i[0]===n&&(r=a,!0)}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,a=this.__entries__;i<a.length;i++){var f=a[i];n.call(r,f[1],f[0])}},e}()}(),k=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,T=typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")(),nt=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(T):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},rt=["top","right","bottom","left","width","height","size","weight"],it=typeof MutationObserver!="undefined",ot=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,n){var r=!1,i=!1,a=0;function f(){r&&(r=!1,e()),i&&o()}function c(){nt(f)}function o(){var d=Date.now();if(r){if(d-a<2)return;i=!0}else r=!0,i=!1,setTimeout(c,n);a=d}return o}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){k&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),it?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){k&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n;rt.some(function(i){return!!~r.indexOf(i)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),L=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},g=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||T},N=j(0,0,0,0);function M(t){return parseFloat(t)||0}function B(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){return r+M(t["border-"+i+"-width"])},0)}function st(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return N;var r=g(t).getComputedStyle(t),i=function(p){for(var v={},b=0,S=["top","right","bottom","left"];b<S.length;b++){var O=S[b],m=p["padding-"+O];v[O]=M(m)}return v}(r),a=i.left+i.right,f=i.top+i.bottom,c=M(r.width),o=M(r.height);if(r.boxSizing==="border-box"&&(Math.round(c+a)!==e&&(c-=B(r,"left","right")+a),Math.round(o+f)!==n&&(o-=B(r,"top","bottom")+f)),!function(p){return p===g(p).document.documentElement}(t)){var d=Math.round(c+a)-e,y=Math.round(o+f)-n;Math.abs(d)!==1&&(c-=d),Math.abs(y)!==1&&(o-=y)}return j(i.left,i.top,c,o)}var at=typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof g(t).SVGGraphicsElement}:function(t){return t instanceof g(t).SVGElement&&typeof t.getBBox=="function"};function ct(t){return k?at(t)?function(e){var n=e.getBBox();return j(0,0,n.width,n.height)}(t):st(t):N}function j(t,e,n,r){return{x:t,y:e,width:n,height:r}}var ut=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=j(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=ct(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),ft=function(t,e){var n,r,i,a,f,c,o,d=(r=(n=e).x,i=n.y,a=n.width,f=n.height,c=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(c.prototype),L(o,{x:r,y:i,width:a,height:f,top:i,right:r+a,bottom:f+i,left:r}),o);L(this,{target:t,contentRect:d})},ht=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new q,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new ut(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new ft(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),C=typeof WeakMap!="undefined"?new WeakMap:new q,G=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ot.getInstance(),r=new ht(e,n,this);C.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){G.prototype[t]=function(){var e;return(e=C.get(this))[t].apply(e,arguments)}});var dt=T.ResizeObserver!==void 0?T.ResizeObserver:G,x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},z=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},lt=typeof x=="object"&&x&&x.Object===Object&&x,pt=typeof self=="object"&&self&&self.Object===Object&&self,I=lt||pt||Function("return this")(),vt=I,bt=function(){return vt.Date.now()},yt=/\s/,_t=function(t){for(var e=t.length;e--&&yt.test(t.charAt(e)););return e},gt=/^\s+/,mt=function(t){return t&&t.slice(0,_t(t)+1).replace(gt,"")},K=I.Symbol,D=K,H=Object.prototype,wt=H.hasOwnProperty,Et=H.toString,w=D?D.toStringTag:void 0,Ot=function(t){var e=wt.call(t,w),n=t[w];try{t[w]=void 0;var r=!0}catch{}var i=Et.call(t);return r&&(e?t[w]=n:delete t[w]),i},Tt=Object.prototype.toString,Mt=Ot,jt=function(t){return Tt.call(t)},V=K?K.toStringTag:void 0,xt=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":V&&V in Object(t)?Mt(t):jt(t)},At=function(t){return t!=null&&typeof t=="object"},St=mt,U=z,Rt=function(t){return typeof t=="symbol"||At(t)&&xt(t)=="[object Symbol]"},kt=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,Kt=/^0o[0-7]+$/i,Pt=parseInt,Ft=z,P=bt,$=function(t){if(typeof t=="number")return t;if(Rt(t))return NaN;if(U(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=U(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=St(t);var n=zt.test(t);return n||Kt.test(t)?Pt(t.slice(2),n?2:8):kt.test(t)?NaN:+t},Wt=Math.max,qt=Math.min,Lt=function(t,e,n){var r,i,a,f,c,o,d=0,y=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError("Expected a function");function b(h){var _=r,R=i;return r=i=void 0,d=h,f=t.apply(R,_)}function S(h){return d=h,c=setTimeout(m,e),y?b(h):f}function O(h){var _=h-o;return o===void 0||_>=e||_<0||p&&h-d>=a}function m(){var h=P();if(O(h))return X(h);c=setTimeout(m,function(_){var R=e-(_-o);return p?qt(R,a-(_-d)):R}(h))}function X(h){return c=void 0,v&&r?b(h):(r=i=void 0,f)}function W(){var h=P(),_=O(h);if(r=arguments,i=this,o=h,_){if(c===void 0)return S(o);if(p)return clearTimeout(c),c=setTimeout(m,e),b(o)}return c===void 0&&(c=setTimeout(m,e)),f}return e=$(e)||0,Ft(n)&&(y=!!n.leading,a=(p="maxWait"in n)?Wt($(n.maxWait)||0,e):a,v="trailing"in n?!!n.trailing:v),W.cancel=function(){c!==void 0&&clearTimeout(c),d=0,r=o=i=c=void 0},W.flush=function(){return c===void 0?f:X(P())},W},Nt=z,Bt=function(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError("Expected a function");return Nt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lt(t,e,{leading:r,maxWait:e,trailing:i})};const F=new Map;let A=null;const J=(t,e)=>{A===null&&(A=new dt(n=>{for(const r of n)F.get(r.target)(r)})),e instanceof Function?(F.set(t,Bt(e,100)),A.observe(t)):(F.delete(t),A.unobserve(t))};function Ct(t,e){J(t,e)}function Gt(t){J(t)}s.install();const E=new Map,Q=s.defineComponent({template:'<div ref="KidarEchartsEl"></div>',props:{extra:{type:Object},title:{type:String,default:""},subtitle:{type:String,default:""},tooltip:{type:Function},click:{type:Function},label:{type:Function},type:{type:String,require:!0,default:""},cols:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},theme:{type:[String,Object]},locale:{type:String,default:"zh-cn"},renderer:{type:String,default:"canvas"},useDirtyRect:{type:Boolean,default:!1},devicePixelRatio:{type:Number}},setup(t,{emit:e,attrs:n}){const r=s.ref(),{theme:i,type:a,cols:f,data:c}=s.toRefs(t);let o=null;const d=s.computed(()=>({locale:t.locale,renderer:t.renderer,devicePixelRatio:t.devicePixelRatio,useDirtyRect:t.useDirtyRect})),y=()=>{o=l.getInstanceByDom(r.value)||l.init(r.value,i?i.value:"",d.value),Ct(r.value,()=>{p()}),p()};s.onUnmounted(()=>{r.value&&Gt(r.value),o&&o.dispose()}),s.onMounted(()=>{r.value?y():s.nextTick(()=>y())});const p=()=>{if(!(!o||o.isDisposed()||!a.value)&&!!E.has(a.value)){if(o.setOption({},!1),E.get(a.value)){const v=E.get(a.value).resetOption(t.cols||[],c.value,et(tt({},t),{chart:o,init:y}));try{v&&o.setOption(v,!0)}catch(b){if(b.message&&b.message.indexOf("not be called during main process")>0)o.dispose(),v&&o.setOption(v,!0);else throw new Error(b)}}o.resize()}};return s.watch([a,f,c],p,{deep:!0}),s.watchEffect(()=>{t.click&&o&&o.on("click",v=>t.click(v))}),s.watch([i],()=>{o&&o.dispose(),y()}),{KidarEchartsEl:r}},render:()=>s.h("div",{style:"overflow:hidden !important;"},[s.h("div",{ref:"KidarEchartsEl",style:"height: 100%; width: 100%;"})])}),It=(t,e)=>{E.has(t),E.set(t,e)},Dt=t=>{t.component("KidarEcharts",Q)};u.KidarEcharts=Q,u.addKidarEchartsPlugin=It,u.install=Dt,Object.defineProperty(u,"__esModule",{value:!0}),u[Symbol.toStringTag]="Module"});
