var It=Object.defineProperty,Dt=Object.defineProperties;var Ht=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable;var X=(u,s,l)=>s in u?It(u,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[s]=l,Y=(u,s)=>{for(var l in s||(s={}))Vt.call(s,l)&&X(u,l,s[l]);if(Q)for(var l of Q(s))Ut.call(s,l)&&X(u,l,s[l]);return u},Z=(u,s)=>Dt(u,Ht(s));(function(u,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("vue-demi"),require("echarts")):typeof define=="function"&&define.amd?define(["exports","vue-demi","echarts"],s):(u=typeof globalThis!="undefined"?globalThis:u||self,s(u.KIDAR_ECHARTS={},u.VueDemi,u.echarts))})(this,function(u,s,l){"use strict";var F=function(){if(typeof Map!="undefined")return Map;function t(e,n){var r=-1;return e.some(function(i,a){return i[0]===n&&(r=a,!0)}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,a=this.__entries__;i<a.length;i++){var f=a[i];n.call(r,f[1],f[0])}},e}()}(),R=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,T=typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")(),tt=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(T):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},et=["top","right","bottom","left","width","height","size","weight"],nt=typeof MutationObserver!="undefined",rt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,n){var r=!1,i=!1,a=0;function f(){r&&(r=!1,e()),i&&o()}function c(){tt(f)}function o(){var h=Date.now();if(r){if(h-a<2)return;i=!0}else r=!0,i=!1,setTimeout(c,n);a=h}return o}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){R&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),nt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){R&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n;et.some(function(i){return!!~r.indexOf(i)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),W=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},g=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||T},q=j(0,0,0,0);function M(t){return parseFloat(t)||0}function L(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){return r+M(t["border-"+i+"-width"])},0)}function it(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return q;var r=g(t).getComputedStyle(t),i=function(p){for(var v={},b=0,A=["top","right","bottom","left"];b<A.length;b++){var O=A[b],m=p["padding-"+O];v[O]=M(m)}return v}(r),a=i.left+i.right,f=i.top+i.bottom,c=M(r.width),o=M(r.height);if(r.boxSizing==="border-box"&&(Math.round(c+a)!==e&&(c-=L(r,"left","right")+a),Math.round(o+f)!==n&&(o-=L(r,"top","bottom")+f)),!function(p){return p===g(p).document.documentElement}(t)){var h=Math.round(c+a)-e,y=Math.round(o+f)-n;Math.abs(h)!==1&&(c-=h),Math.abs(y)!==1&&(o-=y)}return j(i.left,i.top,c,o)}var ot=typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof g(t).SVGGraphicsElement}:function(t){return t instanceof g(t).SVGElement&&typeof t.getBBox=="function"};function st(t){return R?ot(t)?function(e){var n=e.getBBox();return j(0,0,n.width,n.height)}(t):it(t):q}function j(t,e,n,r){return{x:t,y:e,width:n,height:r}}var at=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=j(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=st(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),ct=function(t,e){var n,r,i,a,f,c,o,h=(r=(n=e).x,i=n.y,a=n.width,f=n.height,c=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(c.prototype),W(o,{x:r,y:i,width:a,height:f,top:i,right:r+a,bottom:f+i,left:r}),o);W(this,{target:t,contentRect:h})},ut=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new F,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new at(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new ct(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),N=typeof WeakMap!="undefined"?new WeakMap:new F,B=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=rt.getInstance(),r=new ut(e,n,this);N.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){B.prototype[t]=function(){var e;return(e=N.get(this))[t].apply(e,arguments)}});var ft=T.ResizeObserver!==void 0?T.ResizeObserver:B,x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},k=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},dt=typeof x=="object"&&x&&x.Object===Object&&x,ht=typeof self=="object"&&self&&self.Object===Object&&self,C=dt||ht||Function("return this")(),lt=C,pt=function(){return lt.Date.now()},vt=/\s/,bt=function(t){for(var e=t.length;e--&&vt.test(t.charAt(e)););return e},yt=/^\s+/,_t=function(t){return t&&t.slice(0,bt(t)+1).replace(yt,"")},P=C.Symbol,G=P,I=Object.prototype,gt=I.hasOwnProperty,mt=I.toString,w=G?G.toStringTag:void 0,wt=function(t){var e=gt.call(t,w),n=t[w];try{t[w]=void 0;var r=!0}catch{}var i=mt.call(t);return r&&(e?t[w]=n:delete t[w]),i},Et=Object.prototype.toString,Ot=wt,Tt=function(t){return Et.call(t)},D=P?P.toStringTag:void 0,Mt=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":D&&D in Object(t)?Ot(t):Tt(t)},jt=function(t){return t!=null&&typeof t=="object"},xt=_t,H=k,At=function(t){return typeof t=="symbol"||jt(t)&&Mt(t)=="[object Symbol]"},St=/^[-+]0x[0-9a-f]+$/i,Rt=/^0b[01]+$/i,kt=/^0o[0-7]+$/i,Pt=parseInt,zt=k,z=pt,V=function(t){if(typeof t=="number")return t;if(At(t))return NaN;if(H(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=H(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xt(t);var n=Rt.test(t);return n||kt.test(t)?Pt(t.slice(2),n?2:8):St.test(t)?NaN:+t},Kt=Math.max,Ft=Math.min,Wt=function(t,e,n){var r,i,a,f,c,o,h=0,y=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError("Expected a function");function b(d){var _=r,S=i;return r=i=void 0,h=d,f=t.apply(S,_)}function A(d){return h=d,c=setTimeout(m,e),y?b(d):f}function O(d){var _=d-o;return o===void 0||_>=e||_<0||p&&d-h>=a}function m(){var d=z();if(O(d))return J(d);c=setTimeout(m,function(_){var S=e-(_-o);return p?Ft(S,a-(_-h)):S}(d))}function J(d){return c=void 0,v&&r?b(d):(r=i=void 0,f)}function K(){var d=z(),_=O(d);if(r=arguments,i=this,o=d,_){if(c===void 0)return A(o);if(p)return clearTimeout(c),c=setTimeout(m,e),b(o)}return c===void 0&&(c=setTimeout(m,e)),f}return e=V(e)||0,zt(n)&&(y=!!n.leading,a=(p="maxWait"in n)?Kt(V(n.maxWait)||0,e):a,v="trailing"in n?!!n.trailing:v),K.cancel=function(){c!==void 0&&clearTimeout(c),h=0,r=o=i=c=void 0},K.flush=function(){return c===void 0?f:J(z())},K},qt=k,Lt=function(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError("Expected a function");return qt(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Wt(t,e,{leading:r,maxWait:e,trailing:i})};const U=(()=>{const t=new Map,e=new ft(n=>{for(const r of n)t.get(r.target)(r)});return(n,r)=>{r instanceof Function?(t.set(n,Lt(r,100)),e.observe(n)):(t.delete(n),e.unobserve(n))}})();function Nt(t,e){U(t,e)}function Bt(t){U(t)}document.createElement("canvas"),s.install();const E=new Map,$=s.defineComponent({template:'<div ref="KidarEchartsEl"></div>',props:{extra:{type:Object},title:{type:String,default:""},subtitle:{type:String,default:""},tooltip:{type:Function},click:{type:Function},label:{type:Function},type:{type:String,require:!0,default:""},cols:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},theme:{type:[String,Object]},locale:{type:String,default:"zh-cn"},renderer:{type:String,default:"canvas"},useDirtyRect:{type:Boolean,default:!1},devicePixelRatio:{type:Number,default:window.devicePixelRatio}},setup(t,{emit:e,attrs:n}){const r=s.ref(),{theme:i,type:a,cols:f,data:c}=s.toRefs(t);let o=null;const h=s.computed(()=>({locale:t.locale,renderer:t.renderer,devicePixelRatio:t.devicePixelRatio,useDirtyRect:t.useDirtyRect})),y=()=>{o=l.getInstanceByDom(r.value)||l.init(r.value,i?i.value:"",h.value),Nt(r.value,()=>{p()}),p()};s.onUnmounted(()=>{r.value&&Bt(r.value),o&&o.dispose()}),s.onMounted(()=>{r.value?y():s.nextTick(()=>y())});const p=()=>{if(!(!o||o.isDisposed()||!a.value)&&!!E.has(a.value)){if(o.setOption({},!1),E.get(a.value)){const v=E.get(a.value).resetOption(t.cols||[],c.value,Z(Y({},t),{chart:o,init:y}));try{v&&o.setOption(v,!0)}catch(b){if(b.message&&b.message.indexOf("not be called during main process")>0)o.dispose(),v&&o.setOption(v,!0);else throw new Error(b)}}o.resize()}};return s.watch([a,f,c],p,{deep:!0}),s.watchEffect(()=>{t.click&&o&&o.on("click",v=>t.click(v))}),s.watch([i],()=>{o&&o.dispose(),y()}),{KidarEchartsEl:r}},render:()=>s.h("div",{style:"overflow:hidden !important;"},[s.h("div",{ref:"KidarEchartsEl",style:"height: 100%; width: 100%;"})])}),Ct=(t,e)=>{E.has(t),E.set(t,e)},Gt=t=>{t.component("KidarEcharts",$)};u.KidarEcharts=$,u.addKidarEchartsPlugin=Ct,u.install=Gt,Object.defineProperty(u,"__esModule",{value:!0}),u[Symbol.toStringTag]="Module"});
